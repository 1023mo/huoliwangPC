<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <link rel="shortcut icon" href="imges/favicon.ico" type="image/x-icon" />
    <meta charset="UTF-8">
    <title>火栗网</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<!--登陆弹层-->
<div class="pop_mask">
    <div class="pop_content pop_sign">
        <div class="basics_case" style="display: block">
            <div class="sign_left">
                <img src="./imges/logo_white.svg" alt="">
                <ul>
                    <li>
                        <img src="./imges/study.svg" alt="">
                        <div>
                            <h3>学做不良</h3>
                            <p>掌握资讯  学习知识</p>
                        </div>
                    </li>
                    <li>
                        <img src="./imges/message.svg" alt="">
                        <div>
                            <h3>拓展人脉</h3>
                            <p>在线沟通  交换名片</p>
                        </div>
                    </li>
                    <li>
                        <img src="./imges/zichan.svg" alt="">
                        <div>
                            <h3>资产项目</h3>
                            <p>资产推介  清收对接</p>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="sign_right">
                <img class="colse_pop" src="./imges/colse.svg" alt="">
                <div>
                    <div class="title">
                        <ul class="clearfix select_title select_sign">
                            <li class="fl active" data-type="m">密码登录</li>
                            <li class="fr" data-type="d">短信登录</li>
                        </ul>
                        <ul class="register_case select_title" style="display: none">
                            <li class="active" style="text-align: center">注册</li>
                        </ul>
                    </div>
                    <ul class="sign_content">
                        <li class="currency">
                            <ul>
                                <li class="phone_case">
                                    <a class="right_top register">新用户注册</a>
                                    <div class="border_solide">
                                        <img src="./imges/phone_2.svg" alt="">
                                        <span>+86</span>
                                        <input class="input_phone" type="text" placeholder="请输入手机号">
                                    </div>
                                    <p style="display: none" class="left_bottom"></p>
                                    <p style="display: none" class="riht_bottom go_sign">去登录</p>
                                </li>
                                <li class="password_case template_case">
                                    <div class="border_solide">
                                        <img src="./imges/password.svg" alt="">
                                        <input type="password" placeholder="请输入密码">
                                        <div class="swich_type">
                                            <img src="./imges/eyes_close.svg" alt="">
                                            <img src="./imges/eyes_open.svg" alt="">
                                        </div>
                                    </div>
                                    <p style="display: none" class="left_bottom">请输入正确的密码</p>
                                </li>
                                <li class="seend_case template_case" style="display: none">
                                    <div class="clearfix">
                                        <div class="border_solide fl">
                                            <img src="./imges/password.svg" alt="">
                                            <input type="password" placeholder="请输入验证码">
                                        </div>
                                        <a class="template_btn_red template_btn_standard fr btn_disabled seend_msg" href="javascript:;">发送验证码</a>
                                    </div>
                                    <p style="display: none" class="left_bottom">请输入正确对验证码</p>
                                </li>
                            </ul>
                        </li>
                        <li></li>
                        <li></li>
                    </ul>
                    <!--btn_disabled 置灰去除为激活状态-->
                    <a class="template_btn_red template_btn_standard btn_disabled btn_submit" href="javascript:;">登录</a>
                    <div class="wechat" style="display: block">
                        <img src="./imges/wechat_2.svg" alt="">
                        <p>微信登录</p>
                    </div>
                    <div class="tip_text" style="display: none">
                        <img src="./imges/notice.svg" alt="">
                        <p>注册即表示同意火栗网<a href="javascript:;">《用户协议》、</a><a href="javascript:;">《隐私条款》</a></p>
                    </div>
                </div>
            </div>
        </div>
        <div class="success_case" style="display: none">
            <img class="colse_pop" src="./imges/colse.svg" alt="">
            <div>
                <p class="subtitle">注册成功</p>
                <img src="./imges/QR_code.svg" alt="">
                <p class="tip_text">请使用<span>火栗网APP</span>设置登录密码</p>
            </div>
        </div>
        <div class="wechat_case" style="display: none">
            <img class="colse_pop" src="./imges/colse.svg" alt="">
            <div>
                <p class="subtitle">微信登录</p>
                <img src="./imges/QR_code.svg" alt="">
                <p class="tip_text">请使用微信扫描登录火栗网</p>
            </div>
        </div>
    </div>
</div>
<script src="js/jquery-1.12.2.min.js"></script>
<script src="js/main.js"></script>
<script>
    $('.swich_type').click(function () {
        $(this).toggleClass('active')
        if ($(this).hasClass('active')) $(this).prev().attr("type","text")
        else $(this).prev().attr("type","password")
    })
    $('.input_phone').blur(function (e) {
        var RegCellPhone = /^(1)([0-9]{10})?$/;
        var  falg=$(this).val().search(RegCellPhone);
        if (falg==-1){
            $(this).parent().next().text('请输入正确的手机号').show()
            $('.seend_case').find('.template_btn_standard').addClass('btn_disabled')
        } else {
            $(this).parent().next().text('请输入正确的手机号').hide()
            if ($('.seend_case').find('.template_btn_standard').text() === '发送验证码'
                || $('.seend_case').find('.template_btn_standard').text() === '重新发送') $('.seend_case').find('.template_btn_standard').removeClass('btn_disabled')
            // 判断此时状态是登陆还是注册
            if ($('.register_case').css('display') == 'none'){
                // 判断该用户是否注册过如果没有提示未注册
                // $(this).parent().next().text('手机号未注册').show()
            } else {
                // 发送请求如果已经注册过显示去登陆
                // $(this).parent().next().next().show()
            }
        }
    })
    $('.select_title').on('click','li',function () {
        $(this).addClass('active').siblings().removeClass('active')
        if ($(this).attr('data-type') == 'm'){
            $('.password_case').show()
            $('.seend_case').hide()
            $('.wechat').show()
            $('.tip_text').hide()
        } else if ($(this).attr('data-type') == 'd'){
            $('.password_case').hide()
            $('.seend_case').show()
            $('.wechat').hide()
            $('.tip_text').show()
            clearInterval(timeClock);
            $('.seend_msg').html('发送验证码');
            $('.seend_msg').addClass('btn_disabled')
            if ($('.input_phone').val().search(/^(1)([0-9]{10})?$/) == 0) {
                $('.seend_msg').removeClass('btn_disabled')
            }
        }
    })
    // 发送验证码
    var timeClock
    $('.seend_msg').click(function (e) {
        var _this = $(this)
        if (!_this.hasClass('btn_disabled')) {
            console.log('倒计时');
            var timer_num = 60;
            _this.addClass('btn_disabled')
            timeClock=setInterval(function(){
                timer_num--;
                _this.html('重新发送(' + timer_num + 's)');
                if (timer_num == 0) {
                    clearInterval(timeClock);
                    _this.html('重新发送');
                    _this.removeClass('btn_disabled')
                }
            },100)

        }
    })
    // 新用户注册
    $('.register').click(function (e) {
        $(this).hide();
        $('.register_case').show().prev().hide();
        $('.password_case').hide()
        $('.seend_case').show()
        $('.wechat').hide()
        $('.tip_text').show()
        clearInterval(timeClock);
        $('.seend_msg').html('发送验证码');
        $('.seend_msg').addClass('btn_disabled')
        if ($('.input_phone').val().search(/^(1)([0-9]{10})?$/) == 0) {
            $('.seend_msg').removeClass('btn_disabled')
        }
        $('.btn_submit').text('注册')
    })
    // 去登陆
    $('.go_sign').click(function () {
        $(this).hide();
        $('.register_case').hide().prev().show();
        $('.password_case').show()
        $('.seend_case').hide()
        $('.wechat').show()
        $('.tip_text').hide()
        $('.register').show()
        $('.select_sign').find('li').eq(0).addClass('active')
        $('.select_sign').find('li').eq(1).removeClass('active')
        $('.btn_submit').text('登录')
    })
    // 登陆｜｜注册
    $('.btn_submit').click(function () {
        if (!$(this).hasClass('btn_disabled') && $('.register_case').css('display') == 'none') {
            // 按钮为激活且此时为登陆状态
        } else if (!$(this).hasClass('btn_disabled')){
            // 按钮为激活且此时为注册状态
            $(this).parents('.basics_case').next().show().siblings().hide()
        }
    })
    $('.wechat').click(function () {
        $(this).parents('.basics_case').next().next().show().siblings().hide()
    })
</script>
</body>
</html>
